---
import MainLayout from "../../layouts/MainLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const projects = await getCollection("work");
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<MainLayout title={`${project.data.title} — Your Name`} description={project.data.impactHeadline}>
  <article class="mx-auto max-w-5xl px-4 md:px-6 py-16 md:py-24">
    <header class="mb-16 border-b border-stone-800 pb-12">
      <nav aria-label="Breadcrumb" class="mb-8">
        <ol class="flex items-center gap-2 text-xs font-mono text-stone-500">
          <li><a href="/work" class="hover:text-stone-300 transition-colors">Work</a></li>
          <li aria-hidden="true">·</li>
          <li class="text-stone-400" aria-current="page">{project.data.title}</li>
        </ol>
      </nav>
      <h1 class="font-display text-4xl md:text-5xl text-stone-100 leading-tight mb-6 max-w-3xl">
        {project.data.title}
      </h1>
      <p class="text-lg text-amber-400 font-light leading-relaxed max-w-2xl mb-8">
        {project.data.impactHeadline}
      </p>
      <dl class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {project.data.role && (
          <div>
            <dt class="text-xs font-mono text-stone-500 uppercase tracking-widest mb-1">Role</dt>
            <dd class="text-sm text-stone-300">{project.data.role}</dd>
          </div>
        )}
        {project.data.org && (
          <div>
            <dt class="text-xs font-mono text-stone-500 uppercase tracking-widest mb-1">Organization</dt>
            <dd class="text-sm text-stone-300">{project.data.org}</dd>
          </div>
        )}
        {project.data.timeline && (
          <div>
            <dt class="text-xs font-mono text-stone-500 uppercase tracking-widest mb-1">Timeline</dt>
            <dd class="text-sm text-stone-300">{project.data.timeline}</dd>
          </div>
        )}
        {project.data.team && (
          <div>
            <dt class="text-xs font-mono text-stone-500 uppercase tracking-widest mb-1">Team</dt>
            <dd class="text-sm text-stone-300">{project.data.team}</dd>
          </div>
        )}
      </dl>
      {project.data.tags && (
        <ul class="flex flex-wrap gap-2 mt-8" role="list">
          {project.data.tags.map((tag: string) => (
            <li class="text-xs font-mono text-stone-400 border border-stone-700 px-3 py-1 rounded-sm">
              {tag}
            </li>
          ))}
        </ul>
      )}
    </header>
    <div class="prose prose-invert prose-stone max-w-none prose-headings:font-display prose-headings:font-normal prose-headings:text-stone-100 prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-4 prose-p:text-stone-400 prose-p:leading-relaxed prose-li:text-stone-400 prose-strong:text-stone-200 prose-a:text-amber-400 prose-a:no-underline hover:prose-a:underline prose-hr:border-stone-800 prose-blockquote:border-l-amber-400">
      <Content />
    </div>
    <footer class="mt-24 pt-8 border-t border-stone-800">
      <a href="/work" class="inline-flex items-center gap-2 text-sm font-mono text-stone-500 hover:text-stone-100 transition-colors">
        <span aria-hidden="true">←</span>
        All work
      </a>
    </footer>
  </article>
</MainLayout>