---
import MainLayout from "../../layouts/MainLayout.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("work");
const sorted = projects.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<MainLayout title="Work — Your Name" description="Selected case studies in UX strategy, service design, and research.">
  <div class="mx-auto max-w-5xl px-4 md:px-6 py-16 md:py-24">
    <header class="mb-16">
      <p class="text-xs font-mono text-amber-400 tracking-widest uppercase mb-4">Selected Work</p>
      <h1 class="font-display text-4xl md:text-5xl text-stone-100 leading-tight max-w-2xl">
        Case studies in systems, research, and design strategy.
      </h1>
    </header>
    <ol class="flex flex-col" role="list">
      {sorted.map((project, index) => (
        <li class="group">
          <a href={`/work/${project.slug}`} class="flex flex-col md:flex-row md:items-start gap-4 md:gap-8 py-10 border-t border-stone-800 hover:border-stone-600 transition-colors duration-200">
            <span class="font-mono text-xs text-stone-600 group-hover:text-amber-400 transition-colors pt-1 md:w-8 shrink-0">
              0{index + 1}
            </span>
            <div class="flex-1">
              <div class="flex flex-col md:flex-row md:items-baseline md:justify-between gap-2 mb-3">
                <h2 class="font-display text-xl md:text-2xl text-stone-100 group-hover:text-amber-400 transition-colors">
                  {project.data.title}
                </h2>
                <span class="text-xs font-mono text-stone-500 shrink-0">{project.data.timeline}</span>
              </div>
              <p class="text-stone-400 text-sm leading-relaxed mb-4 max-w-2xl">{project.data.impactHeadline}</p>
              {project.data.tags && (
                <ul class="flex flex-wrap gap-2" role="list">
                  {project.data.tags.map((tag: string) => (
                    <li class="text-xs font-mono text-stone-500 border border-stone-800 px-2 py-0.5 rounded-sm">
                      {tag}
                    </li>
                  ))}
                </ul>
              )}
            </div>
            <span class="hidden md:block text-stone-700 group-hover:text-amber-400 group-hover:translate-x-1 transition-all duration-200 pt-1" aria-hidden="true">→</span>
          </a>
        </li>
      ))}
    </ol>
  </div>
</MainLayout>